<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="web-title">Game Hub</title>
    <link id="web-icon" rel="icon" type="image/png" href="https://i.ibb.co/vz6C89Y/kuromi.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root { --p: #ba59ff; --bg: #0b0b0e; --card: #16161d; --glass: rgba(255, 255, 255, 0.08); --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Kanit', sans-serif; overflow-x: hidden; }
        .nav-bar { height:65px; background: rgba(0,0,0,0.95); display:flex; align-items:center; padding:0 25px; border-bottom: 1px solid var(--glass); position:sticky; top:0; z-index:2000; }
        .nav-left { display:flex; gap:20px; flex: 1; }
        .nav-link { color:#888; text-decoration:none; font-size:14px; transition: var(--transition); cursor: pointer; }
        .nav-link.active { color:var(--p); font-weight: bold; }
        .nav-right { display: flex; justify-content: flex-end; align-items: center; }
        .u-profile { display:flex; align-items:center; gap:10px; background: var(--glass); padding: 5px 12px; border-radius: 50px; cursor:pointer; }
        .u-avatar-nav { width:30px; height:30px; border-radius:50%; border:2px solid var(--p); object-fit:cover; }
        .urgent-bar { height:32px; background: rgba(186,89,255,0.05); border-bottom: 1px solid var(--glass); display:flex; align-items:center; overflow:hidden; }
        .marquee { white-space:nowrap; animation:run 30s linear infinite; color:#ffcc00; font-size:12px; width:100%; }
        @keyframes run { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        .content { padding: 30px 10%; }
        .header-box { display: flex; align-items: center; gap: 12px; margin-bottom: 25px; }
        .line-deco { width: 5px; height: 28px; background: var(--p); border-radius: 10px; box-shadow: 0 0 10px var(--p); }
        .empty-msg { color: #444; font-size: 16px; padding: 60px; text-align: center; border: 2px dashed #222; border-radius: 25px; width: 100%; box-sizing: border-box; }
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; width: 100%; }
        .game-card { background: var(--card); border-radius: 20px; border: 1px solid var(--glass); padding: 50px 20px; text-align: center; cursor: pointer; transition: var(--transition); }
        .game-card:hover { transform: translateY(-8px); border-color: var(--p); }
        
        /* Modal Base */
        .modal { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(12px); display: none; z-index: 3000; align-items: center; justify-content: center; opacity: 0; transition: 0.4s ease; }
        .modal.show { display: flex; opacity: 1; }
        .modal-content { background: #1c1c24; padding: 25px; border-radius: 30px; width: 90%; max-width: 400px; transform: scale(0.9); transition: 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); border: 1px solid rgba(255,255,255,0.05); }
        .modal.show .modal-content { transform: scale(1); }
        
        .topic { font-size: 13px; color: var(--p); margin-bottom: 12px; display: block; }
        .set-row { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.03); padding: 14px 18px; border-radius: 18px; margin-bottom: 10px; }
        .is-disabled { opacity: 0.2; pointer-events: none; }
        .btn-full { width: 100%; padding: 14px; border-radius: 16px; border: none; font-weight: bold; cursor: pointer; color: white; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; font-family: 'Kanit', sans-serif; }
        .switch { position: relative; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--p); }
        input:checked + .slider:before { transform: translateX(20px); }
        .input-dark { width: 100%; padding: 14px; background: #000; border: 1px solid #333; color: white; border-radius: 14px; box-sizing: border-box; margin-top: 10px; outline: none; }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <div class="nav-left">
            <a href="rrr.html" class="nav-link active">üéÆ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°</a>
            <a href="chat.html" class="nav-link">üí¨ ‡πÅ‡∏ä‡∏ó</a>
            <a href="notifications.html" class="nav-link">üîî ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</a>
        </div>
        <div class="nav-right"><div class="u-profile" onclick="openSettings()"><span id="nav-nick">...</span><img id="nav-img" class="u-avatar-nav" src=""></div></div>
    </nav>
    <div class="urgent-bar"><div class="marquee">üö® ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏°‡∏´‡∏•‡∏±‡∏Å! ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô IP ‡πÅ‡∏•‡∏∞ Logout ‡∏™‡πÑ‡∏ï‡∏•‡πå UI ‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß</div></div>
    <div class="content">
        <div class="header-box"><div class="line-deco"></div><h2 style="margin:0;">üéÆ ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2></div>
        <div id="no-game-msg" class="empty-msg">‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏Å‡∏°</div>
        <div class="game-grid" id="game-list"></div>
    </div>

    <div id="setModal" class="modal"><div class="modal-content">
        <h3 style="text-align:center;">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h3>
        <span class="topic">üîî ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
        <div class="set-row"><span>‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span><label class="switch"><input type="checkbox" id="m-noti" onchange="toggleNoti()"><span class="slider"></span></label></div>
        <div id="sub-noti-box">
            <div class="set-row" style="margin-left:20px;"><span>üì∞ ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</span><label class="switch"><input type="checkbox" id="n-noti"><span class="slider"></span></label></div>
            <div class="set-row" style="margin-left:20px;"><span>üí¨ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</span><label class="switch"><input type="checkbox" id="msg-noti"><span class="slider"></span></label></div>
        </div>
        <br><span class="topic">üë§ ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span>
        <button class="btn-full" style="background:var(--p)" id="btn-show-edit" onclick="openProfileEdit()">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
        <div id="profile-edit-zone" style="display:none;"><div id="crop-area"></div><input type="file" id="file-in" style="display:none" accept="image/*"><button class="btn-full" style="background:#444" onclick="document.getElementById('file-in').click()">üì∏ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ</button><input type="text" id="nick-in" class="input-dark" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà"></div>
        <div style="margin-top:20px; border-top:1px solid rgba(255,255,255,0.1); padding-top:15px;">
            <button class="btn-full" style="background:#2ecc71" onclick="saveData()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            <button class="btn-full" style="background:#ff4d4d" onclick="doLogout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            <button class="btn-full" style="background:#444" onclick="closeSettings()">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div></div>

    <div id="logoutModal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <h3 style="margin-top:0;">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</h3>
            <p style="color: #aaa; font-size: 14px; margin-bottom: 25px;">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?<br>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ</p>
            <button class="btn-full" style="background: #ff4d4d;" onclick="confirmLogout()">‡πÉ‡∏ä‡πà, ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            <button class="btn-full" style="background: #444;" onclick="closeLogoutModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div>

    <script>
        const uID = localStorage.getItem('lastLogin') || "User";
        let cropObj;

        function checkGames() {
            const list = document.getElementById('game-list');
            const msg = document.getElementById('no-game-msg');
            msg.style.display = list.children.length > 0 ? 'none' : 'block';
            list.style.display = list.children.length > 0 ? 'grid' : 'none';
        }

        window.onload = () => {
            if(!localStorage.getItem('lastLogin')) location.href = 'index.html';
            const nick = localStorage.getItem(uID + "_nick") || "‡∏ô‡∏ô";
            const img = localStorage.getItem(uID + "_img") || "https://i.ibb.co/vz6C89Y/kuromi.png";
            document.getElementById('nav-nick').innerText = nick;
            document.getElementById('nav-img').src = img;
            document.title = "Game Hub | " + nick;
            document.getElementById('web-icon').href = img;
            document.getElementById('m-noti').checked = localStorage.getItem(uID + "_m_noti") !== "off";
            toggleNoti(); checkGames();
        };

        function openSettings() { const m = document.getElementById('setModal'); m.style.display = 'flex'; setTimeout(() => m.classList.add('show'), 10); }
        function closeSettings() { document.getElementById('setModal').classList.remove('show'); setTimeout(() => document.getElementById('setModal').style.display = 'none', 400); }
        
        // --- Logout UI Logic ---
        function doLogout() {
            closeSettings();
            const m = document.getElementById('logoutModal');
            m.style.display = 'flex';
            setTimeout(() => m.classList.add('show'), 10);
        }
        function closeLogoutModal() {
            const m = document.getElementById('logoutModal');
            m.classList.remove('show');
            setTimeout(() => m.style.display = 'none', 400);
        }
        function confirmLogout() {
            localStorage.removeItem('lastLogin');
            location.href = 'index.html';
        }

        function toggleNoti() { document.getElementById('sub-noti-box').className = document.getElementById('m-noti').checked ? "" : "is-disabled"; }
        function openProfileEdit() { document.getElementById('profile-edit-zone').style.display='block'; document.getElementById('btn-show-edit').style.display='none'; if(!cropObj) { cropObj = new Croppie(document.getElementById('crop-area'), { viewport:{width:140, height:140, type:'circle'}, boundary:{width:220, height:220}, showZoomer:true }); cropObj.bind({url: document.getElementById('nav-img').src}); } }
        document.getElementById('file-in').onchange = (e) => { const r = new FileReader(); r.onload = (ev) => cropObj.bind({url: ev.target.result}); r.readAsDataURL(e.target.files[0]); };
        function saveData() { localStorage.setItem(uID + "_m_noti", document.getElementById('m-noti').checked ? "on" : "off"); if(document.getElementById('profile-edit-zone').style.display === 'block') { cropObj.result('base64').then(res => { localStorage.setItem(uID + "_img", res); const n = document.getElementById('nick-in').value; if(n) localStorage.setItem(uID + "_nick", n); location.reload(); }); } else { closeSettings(); } }
        new MutationObserver(checkGames).observe(document.getElementById('game-list'), { childList: true });
    </script>
</body>
</html>